<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Details</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>body { font-family: 'Roboto', sans-serif; }</style>
</head>
<body class="bg-[#fdfcff] text-slate-800">

    <nav class="sticky top-0 z-50 bg-[#fdfcff]/90 backdrop-blur-md border-b border-slate-100">
        <div class="max-w-6xl mx-auto px-6 py-4 flex justify-between items-center">
            <a href="index.html" class="text-xl font-medium tracking-tight text-indigo-900">Victor Tishkevich</a>
            <div class="flex gap-8 text-sm font-medium text-slate-600">
                <a href="index.html" class="hover:text-indigo-600 transition-colors px-3 py-1">Home</a>
                <a href="projects.html" class="text-indigo-600 bg-indigo-50 px-3 py-1 rounded-full">Projects</a>
                <a href="resume.html" class="hover:text-indigo-600 transition-colors px-3 py-1">Resume</a>
            </div>
        </div>
    </nav>

    <article class="max-w-3xl mx-auto px-6 py-16">
        <div class="w-full h-80 md:h-96 bg-slate-200 rounded-3xl overflow-hidden mb-10">
            <img src="images/invoice_with_margin.png" class="w-full h-full object-cover">
        </div>

        <header class="mb-10">
            <h1 class="text-4xl font-bold text-slate-900 mb-4">Billing Widget (BILL.com API)</h1>
            <div class="flex flex-wrap gap-2">
                <span class="px-3 py-1 bg-slate-100 text-slate-700 rounded-full text-sm font-medium">FastAPI</span>
                <span class="px-3 py-1 bg-slate-100 text-slate-700 rounded-full text-sm font-medium">REST APIs</span>
                <span class="px-3 py-1 bg-slate-100 text-slate-700 rounded-full text-sm font-medium">Docker</span>
                <span class="px-3 py-1 bg-slate-100 text-slate-700 rounded-full text-sm font-medium">OAuth 2.0</span>
                <span class="px-3 py-1 bg-slate-100 text-slate-700 rounded-full text-sm font-medium">Microsoft Azure</span>
            </div>
        </header>

        <div class="prose prose-slate prose-lg text-slate-600 leading-relaxed">
            <p>
                This project focuses on the backend development of a secure invoice management system designed to interact seamlessly with the Bill.com API. Built using FastAPI, the application serves as a middleware solution that authenticates users via Microsoft Entra and facilitates the creation, retrieval, and management of invoices.
            </p>
            
            <h3 class="text-xl font-semibold text-slate-800 mt-8 mb-4">The Challenge</h3>
            <p>
                Integrating financial software into custom enterprise workflows often presents security and usability hurdles. The primary challenge was to create a system that allows individual users to submit invoices without requiring direct access to the organization's main Bill.com account, significantly reducing the time and effort for managers to create invoices.
            </p>
            <p style="margin-top: 1em;">
                In addition, the Bill.com API sessions expire after 35 minutes of inactivity, requiring constant re-authentication mechanisms to ensure a smooth user experience. The system also needed to dynamically map a user logged in via Microsoft Entra to their specific Vendor ID within the Bill.com ecosystem to ensure that invoices were attributed correctly.
            </p>

            <div class="my-8 rounded-2xl overflow-hidden shadow-sm">
                <img src="images/billing-ui.png" class="w-full">
            </div>

            <h3 class="text-xl font-semibold text-slate-800 mt-8 mb-4">The Solution</h3>
            <p>
                I developed a robust FastAPI application that orchestrates the entire lifecycle of an invoice submission, from authentication to file storage. The solution is architected into three distinct phases:
            </p>
            <p style="margin-top: 1em;">
                <strong>Authentication and Identity Mapping:</strong> The application utilizes Microsoft Entra OAuth2.0 for secure user authentication. Once a user logs in, the backend captures their email address and queries the Bill.com /List/Vendor.json endpoint. By matching the signed-in user's email against the vendor list, the system automatically retrieves the correct Bill.com Vendor ID, ensuring that all subsequent actions are securely linked to the correct identity.
            </p>
            <p style="margin-top: 1em;">
                <strong>Invoice Creation and Document Handling:</strong> I implemented a multi-step logic flow to handle bill creation. When a user submits a form containing the invoice number, date, amount, and description, the application formats this payload and sends a POST request to the /Crud/Create/Bill.json endpoint. Upon successful creation of the bill entity, the application executes a secondary process using the /UploadAttachment.json endpoint to attach relevant invoice documents (PDFs/images) directly to the newly created bill. This ensures that the financial record and its supporting documentation are always synchronized.
            </p>
            <p style="margin-top: 1em;">
                <strong>Automated Session Management:</strong> To address the API timeout challenge, I engineered an automatic session refresh mechanism. The Bill.com API session remains active for 35 minutes after the last request. To prevent service interruption, the application runs an asynchronous background task that sends a "keep-alive" request every 30 minutes, resetting the countdown and ensuring the session remains active for users throughout their workday.
            </p>
            <p style="margin-top: 1em;">
                I then collaborated with front-end developers to design micro application components integrated with my middleware app APIs.
            </p>
            <p style="margin-top: 1em;">
                A full flowchart of the application can be found 
                <a href="documents/BILLAPI FlowChart.pdf"
                    class="text-indigo-600 font-medium underline hover:no-underline"
                    target="_blank" rel="noopener noreferrer">
                    here
                </a>
            </p>
        </div>
        
        <div class="mt-12 pt-8 border-t border-slate-100">
            <a href="projects.html" class="text-indigo-600 font-medium hover:underline">&larr; Back to Projects</a>
        </div>
    </article>

</body>
</html>